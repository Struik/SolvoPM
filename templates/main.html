{% extends "index.html" %}
{% load staticfiles %}

{% block extracss %}
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'css/selectize.bootstrap3.css' %}"/>
{% endblock %}

{% block extrajs %}
<script src="{% static 'js/jquery-bootstrap-modal-steps.js' %}"></script>
<script src="{% static 'js/selectize.js' %}"></script>
<script src="{% static 'js/style.js' %}"></script>
<!--script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.js"></script-->
{% endblock %}



{% block page-header %}
{% endblock %}

{% block content %}
<div class="text-center">
    <div class="btn-group">
        <!-- Button trigger modal -->
        <button id="add" class="btn btn-xlg btn-default btn-ghost" data-toggle="modal" data-target="#myModal">Add</button>
        <button id="look" class="btn btn-xlg btn-default btn-ghost">Look</button>
    </div>
</div>
<!-- Modal -->
<form class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="js-title-step"></h4>
            </div>
            <div class="modal-body">
                <div class="row hide" data-step="1" data-title="Description">
                    <div class="form-group col-lg-12">
                        <select class="form-control" id="selectTemplate">
                            <option>No template</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-12">
                        <input type="text" class="form-control" id="projectName" placeholder="Project Name">
                    </div>
                    <div class="form-group col-lg-12">
                        <label class="control-label">Type</label>
                        <div class="radio">
                            <label>
                                <input type="radio" name="optionsRadios" id="Outside" value="option1" checked="">
                                Outside
                            </label>
                        </div>
                        <div class="radio">
                            <label>
                                <input type="radio" name="optionsRadios" id="Inside" value="option2">
                                Inside
                            </label>
                        </div>
                    </div>
                </div>


                <div class="row hide" data-step="2" data-title="Place">
                    <div class="form-group col-lg-12">
                        <input type="text" class="form-control" id="companyName" placeholder="Company Name">
                    </div>
                    <div class="form-group col-lg-12">
                        <select class="form-control" id="selectCountry" placeholder="Select a country" >
                            <option value="">Select a country</option>
                            <option value="1">Russia</option>
                            <option value="2">Ukraine</option>
                            <option value="3">Latvia</option>
                        </select>
                    </div>

                    <div class="form-group col-lg-12">
                        <select class="form-control" id="selectCity" placeholder="Select a city" >
                            <option value="">Select a city</option>
                            <option value="1">Moscow</option>
                            <option value="2">Saint-Peterburg</option>
                            <option value="3">Kiev</option>
                        </select>
                    </div>

                    <div class="form-group col-lg-12">
                        <textarea class="form-control" id="Address" rows="3" placeholder="Address"></textarea>
                    </div>
                </div>

                <div class="row hide" data-step="3" data-title="Stages">
                    <div id="stagesList" class="form-group col-lg-12">
                        <label class="control-label">Current:</label>
                    </div>
                    <div class="form-group col-lg-12">
                        <label class="control-label">Add new</label>
                        <select class="form-control" id="selectStage" placeholder="Stage name">
                            <option value="">Stage name</option>
                            <option value="1">Analysis</option>
                            <option value="2">Configuration</option>
                            <option value="3">Implementation</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-12">
                        <select class="form-control" id="selectAttribute" placeholder="Stage attribute">
                            <option value="">Stage attribute</option>
                            <option value="1">Cost</option>
                            <option value="2">Duration</option>
                            <option value="3">Payment</option>
                        </select>
                    </div>
                    <div class="form-group col-lg-12">
                        <button id="newStage" type="button" class="btn btn-info col-lg-12">Add stage</button>
                    </div>
                    <div class="form-group col-lg-12">
                        <div class="input-group">
                            <span class="input-group-addon">$</span>
                            <input type="text" class="form-control" placeholder="price">
                        </div>
                    </div>




                </div>



            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default js-btn-step pull-left" data-orientation="cancel" data-dismiss="modal"></button>
                <button type="button" class="btn btn-warning js-btn-step" data-orientation="previous"></button>
                <button id="next" type="button" class="btn btn-success js-btn-step" data-orientation="next"></button>
            </div>
        </div>
    </div>
</form>
{% endblock %}

{% block script %}
<script>
$(document).ready(function(){
    $('#myModal').modalSteps();

    $('#myModal').on('shown.bs.modal', function () {
        $('#myInput').focus()
    })

    $('#selectCountry').selectize({
        create: true,
        sortField: 'text'
    });

    $('#selectCity').selectize({
        create: true,
        sortField: 'text',
    });

    $('#selectStage').selectize({
        /*create: true,*/
        sortField: 'text',
    });

    $('#selectAttribute').selectize({
        create: true,
        sortField: 'text',
    });

    $('#selectValue').selectize({
        create: true,
        sortField: 'text',
    });

    var stagesQty = 0;
    var stageText;


    $('#newStage').click(function() {
        stageText = $('#selectStage').text()
        stagesQty++;
        console.log('Stage adding. Stage name: ' + stageText + '. New stages quantity: ' + stagesQty);
        $('#stagesList').append('<a href="#" class="list-group-item" data-toggle="collapse" data-target="#Stage' + stagesQty + '"'
            + 'data-parent="#menu"><strong>' + stageText + '</strong><span class="glyphicon glyphicon-chevron-down pull-right"></span></a>'
            + '<div id="Stage' + stagesQty + '" class="sublinks collapse">'
            + '<a class="list-group-item small">Cost: 5000$</a>'
            + '<a class="list-group-item small">Duration: 5 weeks</a>'
            + '</div>');
        console.log('Stage added');

        $('.collapse').on('shown.bs.collapse', function(){
        $(this).parent().find("a[data-target='#" + $(this).attr("id") + "'] span.glyphicon-chevron-down")
            .removeClass("glyphicon-chevron-down")
            .addClass("glyphicon-chevron-up");
            }).on('hidden.bs.collapse', function(){
                $(this).parent().find(".glyphicon-chevron-up")
                    .removeClass("glyphicon-chevron-up")
                    .addClass("glyphicon-chevron-down");
                });
    });
});
</script>
{% endblock %}
